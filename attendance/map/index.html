<!doctype html>
<html>
        <head>
                <title>Student Geolocation</title>
                        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
                        <meta charset="utf-8">
                        <style>
                                html, body 
                                {
                                        height: 100%;
                                        margin: 0;
                                        padding: 0;
                                }
                                #map 
                                {
                                        height: 100%;
                                }
                        </style>
                        <script src = "js/jquery-1.10.1.min.js"></script>
                        <script src = "http://maps.google.com/maps/api/js?sensor=true"></script>
                        <script src = "js/myScript.js"></script>
        </head>
        <body>
                <div id="map"></div>
                <script>
		//Initializes the Google Map, setting center to University Union and zoom
                function initMap() 
                {
                        //Base case(?) geolocation should find geolocation fail
                        var map = new google.maps.Map(document.getElementById('map'), {
                        center: {lat: 38.559799, lng:  -121.422309},
                        zoom: 18
                });
		//User marker, used in determining the distance between the classroom and the student
                var markerU = null;
                function autoUpdate() 
                {
			//Google library function, retrieves user current position
                        navigator.geolocation.getCurrentPosition(function(position) {  
				//Creates variable containing the latitude and longitude of the user
                                var newPoint = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
				//If markerU (marker user) already exists, sets the marker to the new user position
                                if (markerU) 
                                {
                                        // Marker already created, move it
                                        markerU.setPosition(newPoint);
                                }
				//If markerU (...) does not exist
                                else 
                                {
                                        // Marker does not exist, create it
                                        markerU = new google.maps.Marker({
                                        position: newPoint,
                                        map: map,
                                        title: 'User Location',
                                        animation: google.maps.Animation.DROP
                                });
                        }
                        // Center the map on the new position
                        map.setCenter(newPoint);
                }); 
                // Call the autoUpdate() function every 10 seconds, updates markerU to new position
                setTimeout(autoUpdate, 10000);
                }
                autoUpdate();
                        //Creates the marker, and provides LatLng for circle center
                        var marker = new google.maps.Marker({
                                map: map,
				//Allows marker position to be changed
                                draggable: true,
				//Sets the default latitude and longitude to Riverside 2011(?)
                                position: new google.maps.LatLng(38.560908, -121.422227),
                                title: 'Class Location',
				//Simple bounce animation for flair
                                animation: google.maps.Animation.DROP
                        });
                        //Draws circle on displayed Google Map
                        var circle = new google.maps.Circle({
                                map: map,
                                //20 (approximate) feet radius in meters
                                radius: 10,
				//Simple style, altering colors of the circle
                                fillColor: 'green',
                                strokeColor: 'yellow'
                        });
			//Binds the circle's center to the class marker
                        circle.bindTo('center', marker, 'position');
                }
                </script>
                <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhlrNH73wZlR5lhHly-bpoMMkAuNhp3Tw&callback=initMap">
                </script>
       </body>
</html>
