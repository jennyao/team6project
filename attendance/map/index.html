<!DOCTYPE html>

<html>
        <head>
                <title>Student Geolocation</title>
                        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
                        <meta charset="utf-8">
                        <style>
                                html, body 
                                {
                                        height: 100%;
                                        margin: 0;
                                        padding: 0;
                                }
                                #map 
                                {
                                        height: 100%;
                                }
                        </style>
                        <script src = "js/jquery-1.10.1.min.js"></script>
                        <script src = "http://maps.google.com/maps/api/js?sensor=true"></script>
                        <script src = "js/myScript.js"></script>
        </head>
        <body>
                <div id="map"></div>
                <script>
                function initMap() 
                {
                        //Base case(?) geolocation should find geolocation fail
                        var map = new google.maps.Map(document.getElementById('map'), {
                        center: {lat: 38.559, lng: -121.424},
                        zoom: 18
                });
                        var infoWindow = new google.maps.InfoWindow({map: map});

                        if (navigator.geolocation) 
                        {
                                navigator.geolocation.getCurrentPosition(function(position) 
                                {
                                        //Sets LatLng coords on user
                                        var pos = {
                                        lat: position.coords.latitude,
                                        lng: position.coords.longitude
                                };

                        infoWindow.setPosition(pos);
                        infoWindow.setContent('Location found.');
                        map.setCenter(pos);
                        }, function() {handleLocationError(true, infoWindow, map.getCenter());}
                        );
                        } else {handleLocationError(false, infoWindow, map.getCenter());
                        }
                        //Creates the marker, and provides LatLng for circle center
                        var marker = new google.maps.Marker({
                        map: map,
                        position: new google.maps.LatLng(38.560908, -121.422227),
                        title: 'Some location'
                        });
                        //Draws circle on displayed Google Map
                        var circle = new google.maps.Circle({
                        map: map,
                        //20 feet radius in meters
                        radius: 7,
                        fillColor: '#AA0000'
                        });
                        circle.bindTo('center', marker, 'position');
                }
                function handleLocationError(browserHasGeolocation, infoWindow, pos) 
                {
                        //Error if retrieve geolocation fails
                        infoWindow.setPosition(pos);
                        infoWindow.setContent(browserHasGeolocation ?
                        'Error: The Geolocation service failed.' :
                        'Error: Your browser doesn\'t support Google Maps geolocation.');
                }
                //Google Map display, and key
                </script>
                <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhlrNH73wZlR5lhHly-bpoMMkAuNhp3Tw&callback=initMap">
                </script>
       </body>
</html>
